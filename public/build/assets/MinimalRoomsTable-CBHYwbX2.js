import{o as n,e as r,r as b,g as c,T as L,d as u,a as t,b as h,w as g,F as k,h as S,t as f,q as T,v as M}from"./app-CNFf23ER.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{T as B}from"./Toast-B_HUPplE.js";import{L as y}from"./Logger-DtF2tIuy.js";import"./sweetalert2.all-EiqWMFwt.js";const V=["type"],$={__name:"InfoButton",props:{type:{type:String,default:"submit"}},setup(i){return(e,a)=>(n(),r("button",{type:i.type,class:"inline-flex items-center px-4 py-2 bg-indigo-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 focus:bg-indigo-700 active:bg-indigo-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 transition ease-in-out duration-150"},[b(e.$slots,"default")],8,V))}},G={},N={class:"py-2 px-4 bg-indigo-100 text-indigo-500 hover:bg-indigo-200 hover:shadow-md transition-all duration-200 font-medium rounded-md mb-4"};function j(i,e){return n(),r("button",N,[b(i.$slots,"default",{},()=>[c("A침adir nueva")])])}const A=R(G,[["render",j]]),D={class:"mt-2"},E={class:"w-full table-auto"},F={class:"justify-between"},Z={class:"bg-gray-600 text-left"},z=t("th",{class:"pl-4 py-2"},[t("span",{class:"text-gray-100 font-semibold"},"Clave")],-1),H={class:"py-2 flex items-center justify-between"},I=t("span",{class:"text-gray-100 font-semibold"},"Habitaci칩n",-1),P=t("th",{class:"px-8 py-2"},[t("span",{class:"text-gray-100 font-semibold"},"...")],-1),U={class:"bg-gray-200"},q={class:"bg-white border-b-2 border-gray-200"},J={class:"pl-4 bg-indigo-200"},K={class:"text-center ml-2 font-semibold"},O=["id","onUpdate:modelValue"],Q={class:"px-8 py-2"},W={class:"text-yellow-500 flex"},X=["onClick"],Y=t("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"},null,-1),tt=t("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),ot=t("g",{id:"SVGRepo_iconCarrier"},[t("title",null,"save-floppy"),c(),t("desc",null,"Created with Sketch Beta."),c(),t("defs"),c(),t("g",{id:"Page-1",stroke:"none","stroke-width":"1",fill:"currentColor","fill-rule":"evenodd","sketch:type":"MSPage"},[t("g",{id:"Icon-Set","sketch:type":"MSLayerGroup",transform:"translate(-152.000000, -515.000000)",fill:"currentColor"},[t("path",{d:"M171,525 C171.552,525 172,524.553 172,524 L172,520 C172,519.447 171.552,519 171,519 C170.448,519 170,519.447 170,520 L170,524 C170,524.553 170.448,525 171,525 L171,525 Z M182,543 C182,544.104 181.104,545 180,545 L156,545 C154.896,545 154,544.104 154,543 L154,519 C154,517.896 154.896,517 156,517 L158,517 L158,527 C158,528.104 158.896,529 160,529 L176,529 C177.104,529 178,528.104 178,527 L178,517 L180,517 C181.104,517 182,517.896 182,519 L182,543 L182,543 Z M160,517 L176,517 L176,526 C176,526.553 175.552,527 175,527 L161,527 C160.448,527 160,526.553 160,526 L160,517 L160,517 Z M180,515 L156,515 C153.791,515 152,516.791 152,519 L152,543 C152,545.209 153.791,547 156,547 L180,547 C182.209,547 184,545.209 184,543 L184,519 C184,516.791 182.209,515 180,515 L180,515 Z",id:"save-floppy","sketch:type":"MSShapeGroup"})])])],-1),et=[Y,tt,ot],st=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-green-700 hover:text-green-500 mx-2 transition-colors duration-200",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),t("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"})],-1),at={key:1},nt={class:"pl-4 bg-indigo-200"},rt={class:"text-center ml-2 font-semibold"},it=t("td",{class:"px-16 py-2",colspan:"2"},[t("span",{class:"text-center font-semibold"},"No se encontraron habitaciones...")],-1),mt={__name:"MinimalRoomsTable",props:{room_type:{default:""},base_availability:{type:Number,default:0},RoomType:{type:String,default:""}},setup(i){const e=i,a=L({id:null,room_type_id:"",room:0,status:1}),s=u([]),p=u(!1),v={id:null,room_type_id:e.RoomType,room:1,status:"unavailable"},x=()=>{const o=u({...v});o.value.room=s.value.length+1,s.value=[...s.value,o.value]};function w(o){return axios.get(`/admin/rooms/api/rooms/${o}`).then(l=>(y("MinimalRoomsTable:49 axios call",l.data),l.data)).catch(l=>{console.error(l),alert("Error al cargar las habitaciones")})}async function m(){s.value=await w(e.room_type),y("MinimalRoomsTable",e.room_type),s.value=s.value.data,p.value=!0,console.log(s.value)}const C=o=>{a.id=o!=null&&o.id?o.id:null,a.room_type_id=e.room_type,a.room=o.room,a.status=o.status,a.post(route("admin.rooms.rooms.store.json",{room_type_id:e.room_type}),{errorBag:"RoomsForm",preserveScroll:!0,onSuccess:l=>{a.reset(),B("Cambios guardados")},onError:()=>{alert("Error al guardar la habitaci칩n"),console.log(a.errors)}})};return m(e.room_type),(o,l)=>(n(),r("div",D,[t("div",null,[h(A,{onClick:x,type:"button",class:"w-full mb-4"},{default:g(()=>[c("Agregar habitaci칩n")]),_:1})]),t("table",E,[t("thead",F,[t("tr",Z,[z,t("th",H,[I,h($,{onClick:m,type:"button",class:"mr-2"},{default:g(()=>[c("Actualizar")]),_:1})]),P])]),t("tbody",U,[p.value&&s.value.length>0?(n(!0),r(k,{key:0},S(s.value,d=>(n(),r("tr",q,[t("td",J,[t("span",K,f(e.RoomType),1)]),t("td",null,[t("span",null,[T(t("input",{class:"border-none w-full",type:"text",name:"rooms",id:i.RoomType+"-"+d.room,"onUpdate:modelValue":_=>d.room=_},null,8,O),[[M,d.room]])])]),t("td",Q,[t("span",W,[(n(),r("svg",{onClick:_=>C(d),title:"Guardar cambios",class:"h-5 w-5 text-indigo-500 hover:text-indigo-200 transition-colors duration-200 cursor-pointer",viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:sketch":"http://www.bohemiancoding.com/sketch/ns",fill:"currentColor"},et,8,X)),st])])]))),256)):(n(),r("tr",at,[t("td",nt,[t("span",rt,f(e.RoomType),1)]),it]))])])]))}};export{mt as default};
