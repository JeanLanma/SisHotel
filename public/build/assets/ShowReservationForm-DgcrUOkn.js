import{d as _,T,s as R,e as r,a as o,b as n,u as a,q as p,B as y,F as v,h as g,t as u,f as S,v as U,o as m}from"./app-CNFf23ER.js";import{_ as i}from"./TextInput-CVjuxNOj.js";import{R as F}from"./RoomEnums-B77AAU0U.js";import{T as D}from"./Toast-B_HUPplE.js";import{L as A}from"./Logger-DtF2tIuy.js";import{c as x,G as C,d as N,A as B}from"./Reservation-eKo339vd.js";import"./sweetalert2.all-EiqWMFwt.js";const c=new Date().toISOString().split("T")[0],E=new Date(Date.now()+864e5).toISOString().split("T")[0],G={id:null,serie:"A",folio:null,guests_name:"",checkin:c,checkout:E,arrival_time:"15:00",status:"pending",expiration_date:c,adults:2,kids:0,person_booking_name:"",phone:"",email:"",observations:"",reservation_type:null,rooms:1,room_type_id:1,room_id:null,user_id:null,shift:null,guests_id:null,total:0,tax_free_account:0,mail_sent:0,internal_reference:null,created_at:c,updated_at:c,room_type:{id:1,name:"Suite sencilla",room_type:"STS",description:"Suite sencilla para dos personas",base_occupancy:2,max_occupancy:2,base_occupancy_kids:2,max_occupancy_kids:null,base_price:1e3,extra_adult_price:null,extra_kid_price:null,base_availability:3,status:"ok",created_at:"2024-08-15T20:28:32.000000Z",updated_at:"2024-08-15T20:29:51.000000Z"},guests:{id:5,name:"Alan",lastname:"Diaz",phone:"33-2442-2442",email:"alan@diaz.com",created_at:"2024-08-16T18:08:09.000000Z",full_name:"Alan Diaz "},user:{id:1,name:"admin",email:"admin@admin.com",profile_photo_url:"https://ui-avatars.com/api/?name=a&color=7F9CF5&background=EBF4FF"}},M=o("div",{class:"-mt-2"},[o("h1",{class:"text-2xl font-bold text-gray-700"},"Datos de la reservación")],-1),O={class:"flex"},j={class:"w-1/3 mr-4"},L=o("label",{for:"checkin",class:"block text-sm font-bold text-gray-700"},"Check in",-1),z={class:"w-1/3 mr-4"},Z=o("label",{for:"checkout",class:"block text-sm font-bold text-gray-700"},"Check out",-1),H={class:"w-1/3"},I=o("label",{for:"room_type",class:"block text-sm font-bold text-gray-700"},"Tipo de habitación",-1),q=["value","selected"],P={class:"flex mt-6"},X={class:"w-1/8 mr-4"},$=o("label",{for:"adults",class:"block text-sm font-bold text-gray-700"},"Adultos",-1),J={class:"w-1/8 mr-4"},K=o("label",{for:"children",class:"block text-sm font-bold text-gray-700"},"Niños",-1),Q={class:"w-1/8 mr-4"},W=o("label",{for:"rooms",class:"block text-sm font-bold text-gray-700"},"Habitaciones",-1),Y={class:"w-1/8"},ee=o("label",{for:"room_id",class:"block text-sm font-bold text-gray-700"},"Habitación",-1),oe=["value"],te=["value","disabled"],ae={class:"flex justify-between gap-4"},le={class:"mt-6 w-full"},se=o("label",{for:"name",class:"block text-sm font-bold text-gray-700"},"Nombre(s)",-1),ne={class:"mt-6 w-full"},ie=o("label",{for:"lastname",class:"block text-sm font-bold text-gray-700"},"Apellido",-1),de={class:"mt-6 w-full"},re=o("label",{for:"email",class:"block text-sm font-bold text-gray-700"},"Correo electrónico",-1),me={class:"mt-6 w-full"},ue=o("label",{for:"phone",class:"block text-sm font-bold text-gray-700"},"Telefono",-1),ce={class:"flex mt-6"},_e={class:"w-full"},pe=o("label",{for:"observations",class:"block text-sm font-bold text-gray-700"},"Observaciones",-1),ke={__name:"ShowReservationForm",props:{RoomTypes:Object,Reservation:Object},setup(k){const b=k,s=_(b.Reservation||G),f=_(b.RoomTypes),h=_([]),e=T({checkin:x(s.value.checkin),checkout:x(s.value.checkout),nights:1,room_type:s.value.room_type,adults:s.value.adults,kids:s.value.kids,rooms:s.value.rooms,room_type_id:s.value.room_type_id,room_id:s.value.room_id,name:s.value.guest_name,lastname:s.value.guests.lastname,email:s.value.email,phone:s.value.phone,gender:"M",nationality:"MX",observations:s.value.observations,tax_free_account:s.value.tax_free_account,total:s.value.total});A("ReservationShowForm:44",s.value);const w=()=>{e.nights=C(e.checkin,e.checkout),e.tax_free_account=N(f.value.find(d=>d.id==e.room_type).base_price,e.nights,e.rooms),e.total=B(e.tax_free_account),e.post(route("admin.reservations.store"),{preserveScroll:!0,onSuccess:()=>{D("Reservación guardada"),e.reset()},onError:d=>{log("Error",d),alert("Error al guardar la reservación")}})},V=async()=>{const d=await axios.get(route("admin.rooms.rooms.get.availability.json",{checkin:e.checkin,checkout:e.checkout,room_type_id:s.value.room_type_id}));h.value=d.data};return R(()=>{V()}),(d,l)=>(m(),r(v,null,[M,o("form",null,[o("div",null,[o("div",O,[o("div",j,[L,n(i,{disabled:"true",modelValue:a(e).checkin,"onUpdate:modelValue":l[0]||(l[0]=t=>a(e).checkin=t),type:"date",name:"checkin",id:"checkin",class:"mt-1 w-full"},null,8,["modelValue"])]),o("div",z,[Z,n(i,{modelValue:a(e).checkout,"onUpdate:modelValue":l[1]||(l[1]=t=>a(e).checkout=t),type:"date",name:"checkout",id:"checkout",class:"mt-1 w-full"},null,8,["modelValue"])]),o("div",H,[I,p(o("select",{"onUpdate:modelValue":l[2]||(l[2]=t=>a(e).room_type_id=t),id:"room_type",name:"room_type",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 w-full"},[(m(!0),r(v,null,g(f.value,t=>(m(),r("option",{value:t.id,selected:s.value.room_type_id==t.id},u(t.name)+" - "+u(t.room_type),9,q))),256))],512),[[y,a(e).room_type_id]])])]),o("div",P,[o("div",X,[$,n(i,{min:"0",modelValue:a(e).adults,"onUpdate:modelValue":l[3]||(l[3]=t=>a(e).adults=t),type:"number",name:"adults",id:"adults",class:"mt-1 w-full"},null,8,["modelValue"])]),o("div",J,[K,n(i,{min:"0",modelValue:a(e).kids,"onUpdate:modelValue":l[4]||(l[4]=t=>a(e).kids=t),type:"number",name:"children",id:"children",class:"mt-1 -full"},null,8,["modelValue"])]),o("div",Q,[W,n(i,{min:"0",modelValue:a(e).rooms,"onUpdate:modelValue":l[5]||(l[5]=t=>a(e).rooms=t),type:"number",name:"rooms",id:"rooms",class:"mt-1 w-full"},null,8,["modelValue"])]),o("div",Y,[ee,p(o("select",{"onUpdate:modelValue":l[6]||(l[6]=t=>a(e).room_id=t),name:"room_id",id:"room_id",class:"w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},[a(e).room_id?(m(),r("option",{key:0,value:a(e).room_id,selected:"",disabled:""},u(s.value.room.room),9,oe)):S("",!0),(m(!0),r(v,null,g(h.value,t=>(m(),r("option",{value:t.id,disabled:t.status!="available"},u(t.room)+" - "+u(a(F)(t.status)),9,te))),256))],512),[[y,a(e).room_id]])])])]),o("div",null,[o("div",ae,[o("div",le,[se,n(i,{modelValue:a(e).name,"onUpdate:modelValue":l[7]||(l[7]=t=>a(e).name=t),type:"text",name:"name",id:"name",class:"mt-1 w-full"},null,8,["modelValue"])]),o("div",ne,[ie,n(i,{modelValue:a(e).lastname,"onUpdate:modelValue":l[8]||(l[8]=t=>a(e).lastname=t),type:"text",name:"lastname",id:"lastname",class:"mt-1 w-full"},null,8,["modelValue"])]),o("div",de,[re,n(i,{modelValue:a(e).email,"onUpdate:modelValue":l[9]||(l[9]=t=>a(e).email=t),type:"email",name:"email",id:"email",class:"mt-1 w-full"},null,8,["modelValue"])]),o("div",me,[ue,n(i,{modelValue:a(e).phone,"onUpdate:modelValue":l[10]||(l[10]=t=>a(e).phone=t),type:"text",name:"phone",id:"phone",class:"mt-1 w-full"},null,8,["modelValue"])])])]),o("div",null,[o("div",ce,[o("div",_e,[pe,p(o("textarea",{"onUpdate:modelValue":l[11]||(l[11]=t=>a(e).observations=t),name:"observations",id:"observations",class:"mt-1 focus :ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[U,a(e).observations]])])])]),o("div",{class:"mt-6"},[o("button",{onClick:w,type:"button",class:"py-2 px-4 bg-indigo-500 text-white hover:bg-indigo-600 transition-all duration-200 font-medium rounded-md"}," Guardar ")])])],64))}};export{ke as default};
