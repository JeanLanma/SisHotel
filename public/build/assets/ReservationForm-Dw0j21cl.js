import{d as f,T as R,e as i,a as o,n as m,u as s,g as _,q as u,A as v,t as d,b as n,B as k,F as g,h as y,f as U,v as E,x,o as c}from"./app-CNFf23ER.js";import{_ as r}from"./TextInput-CVjuxNOj.js";import{T as C,b as N,a as A}from"./Toast-B_HUPplE.js";import{L as b}from"./Logger-DtF2tIuy.js";import{G as S,d as j,A as B}from"./Reservation-eKo339vd.js";import{R as F}from"./RoomEnums-B77AAU0U.js";import"./sweetalert2.all-EiqWMFwt.js";const G={class:"flex"},H={class:"w-1/3 mr-4"},L={class:"w-1/3 mr-4"},M={class:"w-1/3"},P=o("label",{for:"room_type",class:"block text-sm font-bold text-gray-700"},"Tipo de habitación",-1),D=o("option",{selected:"",value:"",disabled:""},"-- seleccionar --",-1),I=["value"],O={class:"flex mt-6"},q={class:"w-1/8 mr-4"},z=o("label",{for:"adults",class:"block text-sm font-bold text-gray-700"},"Adultos",-1),W={class:"w-1/8 mr-4"},X=o("label",{for:"children",class:"block text-sm font-bold text-gray-700"},"Niños",-1),$={class:"w-1/8 mr-4"},J=o("label",{for:"rooms",class:"block text-sm font-bold text-gray-700"},"Habitaciones",-1),K={key:0,class:"w-3/8"},Q=o("label",{for:"room_id",class:"block text-sm font-bold text-gray-700"},"Habitaciones disponibles",-1),Y=o("option",{selected:"",value:"null",disabled:""},"--- seleccionar ---",-1),Z=["value","disabled"],ee={class:"flex justify-between gap-4"},oe={class:"mt-6 w-full"},te=o("label",{for:"name",class:"block text-sm font-bold text-gray-700"},"Nombre(s)",-1),se={class:"mt-6 w-full"},le=o("label",{for:"lastname",class:"block text-sm font-bold text-gray-700"},"Apellido",-1),ae={class:"mt-6 w-full"},ne=o("label",{for:"email",class:"block text-sm font-bold text-gray-700"},"Correo electrónico",-1),re={class:"mt-6 w-full"},ie=o("label",{for:"phone",class:"block text-sm font-bold text-gray-700"},"Telefono",-1),de={class:"flex mt-6"},ce={class:"w-full"},me=o("label",{for:"observations",class:"block text-sm font-bold text-gray-700"},"Observaciones",-1),ue={class:"mt-6"},be=["disabled"],xe={__name:"ReservationForm",props:{RoomTypes:Object},setup(V){const p=f(V.RoomTypes),h=f([]),e=R({checkin:"",checkout:"",nights:0,room_type:"",adults:2,kids:0,rooms:1,room_id:null,name:"",lastname:"",email:"",phone:"",gender:"M",nationality:"MX",observations:"",tax_free_account:0,total:0}),w=()=>{e.nights=S(e.checkin,e.checkout),e.tax_free_account=j(p.value.find(a=>a.id==e.room_type).base_price,e.nights,e.rooms),e.total=B(e.tax_free_account),e.post(route("admin.reservations.store"),{preserveScroll:!0,onSuccess:()=>{C("Reservación guardada"),e.reset()},onError:a=>{b("Error",a),alert("Error al guardar la reservación")}})},T=a=>{if(a.target.value,p.value.find(t=>t.id==a.target.value),e.checkin,e.checkout,e.checkin==""){e.setError({checkin:"Por favor selecciona una fecha"}),setTimeout(()=>{e.clearErrors("checkin")},5e3);return}if(e.checkout==""){e.setError({checkout:"Por favor selecciona una fecha"}),setTimeout(()=>{e.clearErrors("checkout")},5e3);return}x.get(route("admin.rooms.rooms.get.room-type.availability.json",{checkin:e.checkin,checkout:e.checkout,room_type_id:a.target.value})).then(t=>{N("Habitaciones disponibles: "+t.data.available),t.data.available<=0&&A("No hay habitaciones disponibles para el tipo de habitación seleccionado"),b("Room Availability Complete:",t.data)}).catch(t=>{b("Error",t)}),x.get(route("admin.rooms.rooms.get.availability.json",{checkin:e.checkin,checkout:e.checkout,room_type_id:a.target.value})).then(t=>{h.value=t.data}).catch(t=>{b("Error",t)})};return(a,t)=>(c(),i("form",null,[o("div",null,[o("div",G,[o("div",H,[o("label",{for:"checkin",class:m(["block text-sm font-bold text-gray-700",s(e).errors.checkin?"text-red-500":""])},[_("Check in "),u(o("span",{class:"text-xs"},"("+d(s(e).errors.checkin??null)+")",513),[[v,s(e).errors.checkin]])],2),n(r,{modelValue:s(e).checkin,"onUpdate:modelValue":t[0]||(t[0]=l=>s(e).checkin=l),type:"date",name:"checkin",id:"checkin",class:m(["mt-1 w-full",s(e).errors.checkin?"border-red-500":""])},null,8,["modelValue","class"])]),o("div",L,[o("label",{for:"checkout",class:m(["block text-sm font-bold text-gray-700",s(e).errors.checkout?"text-red-500":""])},[_("Check out "),u(o("span",{class:"text-xs"},"("+d(s(e).errors.checkout??null)+")",513),[[v,s(e).errors.checkout]])],2),n(r,{modelValue:s(e).checkout,"onUpdate:modelValue":t[1]||(t[1]=l=>s(e).checkout=l),type:"date",name:"checkout",id:"checkout",class:m(["mt-1 w-full",s(e).errors.checkout?"border-red-500":""])},null,8,["modelValue","class"])]),o("div",M,[P,u(o("select",{onChange:T,placeholder:"-- Tipo de habitación --","onUpdate:modelValue":t[2]||(t[2]=l=>s(e).room_type=l),id:"room_type",name:"room_type",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 w-full"},[D,(c(!0),i(g,null,y(p.value,l=>(c(),i("option",{value:l.id},d(l.name)+" - "+d(l.room_type),9,I))),256))],544),[[k,s(e).room_type]])])]),o("div",O,[o("div",q,[z,n(r,{min:"0",modelValue:s(e).adults,"onUpdate:modelValue":t[3]||(t[3]=l=>s(e).adults=l),type:"number",name:"adults",id:"adults",class:"mt-1 w-full"},null,8,["modelValue"])]),o("div",W,[X,n(r,{min:"0",modelValue:s(e).kids,"onUpdate:modelValue":t[4]||(t[4]=l=>s(e).kids=l),type:"number",name:"children",id:"children",class:"mt-1 -full"},null,8,["modelValue"])]),o("div",$,[J,n(r,{min:"0",modelValue:s(e).rooms,"onUpdate:modelValue":t[5]||(t[5]=l=>s(e).rooms=l),type:"number",name:"rooms",id:"rooms",class:"mt-1 w-full"},null,8,["modelValue"])]),h.value.length>0?(c(),i("div",K,[Q,u(o("select",{"onUpdate:modelValue":t[6]||(t[6]=l=>s(e).room_id=l),name:"room_id",id:"room_id",class:"w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},[Y,(c(!0),i(g,null,y(h.value,l=>(c(),i("option",{value:l.id,disabled:l.status!="available"},d(l.room)+" - "+d(s(F)(l.status)),9,Z))),256))],512),[[k,s(e).room_id]])])):U("",!0)])]),o("div",null,[o("div",ee,[o("div",oe,[te,n(r,{modelValue:s(e).name,"onUpdate:modelValue":t[7]||(t[7]=l=>s(e).name=l),type:"text",name:"name",id:"name",class:"mt-1 w-full"},null,8,["modelValue"])]),o("div",se,[le,n(r,{modelValue:s(e).lastname,"onUpdate:modelValue":t[8]||(t[8]=l=>s(e).lastname=l),type:"text",name:"lastname",id:"lastname",class:"mt-1 w-full"},null,8,["modelValue"])]),o("div",ae,[ne,n(r,{modelValue:s(e).email,"onUpdate:modelValue":t[9]||(t[9]=l=>s(e).email=l),type:"email",name:"email",id:"email",class:"mt-1 w-full"},null,8,["modelValue"])]),o("div",re,[ie,n(r,{modelValue:s(e).phone,"onUpdate:modelValue":t[10]||(t[10]=l=>s(e).phone=l),type:"text",name:"phone",id:"phone",class:"mt-1 w-full"},null,8,["modelValue"])])])]),o("div",null,[o("div",de,[o("div",ce,[me,u(o("textarea",{"onUpdate:modelValue":t[11]||(t[11]=l=>s(e).observations=l),name:"observations",id:"observations",class:"mt-1 focus :ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[E,s(e).observations]])])])]),o("div",ue,[o("button",{onClick:w,type:"button",class:m(["py-2 px-4 bg-indigo-500 text-white hover:bg-indigo-600 transition-all duration-200 font-medium rounded-md",{"opacity-25":s(e).processing}]),disabled:s(e).processing}," Guardar ",10,be)])]))}};export{xe as default};
